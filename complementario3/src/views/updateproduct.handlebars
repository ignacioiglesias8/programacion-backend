<h1>{{title}}</h1>

<label for="productId">Producto Id</label>
<input type="text" name="productId" id="productId">

<label for="title">Nombre</label>
<input type="text" name="title" id="title">

<label for="description">Descripción</label>
<input type="text" name="description" id="description">

<label for="price">Precio</label>
<input type="number" name="price" id="price">

<label for="code">Código</label>
<input type="text" name="code" id="code">

<label for="stock">Stock</label>
<input type="number" name="stock" id="stock">

<label for="category">Categoría</label>
<select name="category" id="category">
    <option value="nacional">Nacional</option>
    <option value="internacional">Internacional</option>
</select>

<label for="status">Status</label>
<select name="status" id="status">
    <option value="true">Disponible</option>
    <option value="false">No disponible</option>
</select>

<button type="button" class="updateProduct">Modificar producto</button>



<script>
let updateProductButton = document.querySelector(".updateProduct");
if (updateProductButton) {
    updateProductButton.addEventListener("click", function () {
    const productId = document.getElementById("productId").value;
    const title = document.getElementById("title").value;
    const description = document.getElementById("description").value;
    const price = document.getElementById("price").value;
    const code = document.getElementById("code").value;
    const stock = document.getElementById("stock").value;
    const category = document.getElementById("category").value;
    const status = document.getElementById("status").value;

    if (!productId) {
        alert("Por favor, ingrese un ID de producto válido.");
        return;
    }

    if (!confirm("¿Está seguro de que desea modificar este producto?")) {
        return;
    }

        const modifications = {
            title,
            description,
            price,
            code,
            stock,
            category,
            status
        };

    fetch(`/api/products/${productId}`, {
        method: "PUT",
        headers: {
        "Content-Type": "application/json"
        },
        body: JSON.stringify(modifications)
    })
        .then((response) => {
        if (response.ok) {
            alert("Producto modificado correctamente");
            document.getElementById("productId").value = "";
            document.getElementById("title").value = "";
            document.getElementById("description").value = "";
            document.getElementById("price").value = "";
            document.getElementById("code").value = "";
            document.getElementById("stock").value = "";
        } else {
            console.error("Error al modificar el producto.");
        }
        })
        .catch((error) => {
        console.error("Error al realizar la solicitud:", error);
        });
    });
}
</script>